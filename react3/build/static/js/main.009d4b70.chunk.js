(this.webpackJsonpgitmanager=this.webpackJsonpgitmanager||[]).push([[0],{116:function(e,t,a){e.exports=a(171)},121:function(e,t,a){},123:function(e,t,a){},156:function(e,t,a){},168:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),c=a.n(l);a(121),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(122);var o=a(15),s=a(8),i=a(16),u=a(17),m=a(18),d=a(43),h=(a(123),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{id:"footer",bg:"warning",variant:"dark",className:"w-100 d-flex justify-content-center"},r.a.createElement("div",null,"StackRoute @Copyright Assignment")))}}]),t}(n.Component)),p=a(23),E=a(110),b=a(111),g=a(30),f=a(39),v=a(105),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).logout=a.logout.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"logout",value:function(){localStorage.removeItem("token"),localStorage.removeItem("username"),this.props.history.push("/login")}},{key:"render",value:function(){return r.a.createElement(d.a,{bg:"warning",variant:"dark"},r.a.createElement(d.a.Brand,null,"React Assignment2 ToDo"),null!==localStorage.getItem("username")&&r.a.createElement(r.a.Fragment,null," ",r.a.createElement(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(d.a.Collapse,{id:"basic-navbar-nav",className:"d-flex justify-content-end"},r.a.createElement(E.a,null,r.a.createElement(g.b,{className:"nav-link",to:"/savedNews"},"Read Saved News"),r.a.createElement(g.b,{className:"nav-link",to:"/dashboard"},"Dashboard"),r.a.createElement(b.a,{title:"Welcome "+localStorage.getItem("username"),id:"basic-nav-dropdown"},r.a.createElement(v.a,{className:"w-100",variant:"secondary",onClick:this.logout},"Logout"))))))}}]),t}(n.Component),j=Object(f.g)(y),O=a(36),k=a.n(O),w=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getDataFromApi",value:function(e){return k.a.get(e)}},{key:"getDataFromDatabase",value:function(e,t){return k.a.get(e,t)}}]),e}()),C=a(112),D=a(55),I=(a(156),a(187)),N=a(189);var x=function(e){var t=Object(n.useState)(!1),a=Object(C.a)(t,2),l=a[0],c=a[1],o=function(){return c(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,{id:"myCard"},r.a.createElement(D.a.Img,{variant:"top",src:e.article.urlToImage}),r.a.createElement(D.a.Body,null,r.a.createElement(D.a.Title,null,e.article.title),r.a.createElement("div",{id:"cardButtons"},"dashboard"===e.type&&r.a.createElement("div",null,r.a.createElement(I.a,{className:"w-100",id:e.buttonId,variant:"contained",onClick:function(){e.readLater(e.article,e.buttonId)}},"Read Later"),r.a.createElement("p",{id:e.buttonId+"text"},"News Added To Read Later Database")),r.a.createElement(v.a,{className:"w-100 mt-1",variant:"success",onClick:function(){return c(!0)}},"Read Now")))),r.a.createElement(N.a,{show:l,onHide:o},r.a.createElement(N.a.Header,{closeButton:!0},r.a.createElement(N.a.Title,null,e.article.title)),r.a.createElement(N.a.Body,null,r.a.createElement("img",{src:e.article.urlToImage,alt:"news"}),e.article.description),r.a.createElement(N.a.Footer,null,r.a.createElement(v.a,{variant:"secondary",onClick:o},"Close"))))},S=a(61),B=a(62),A=a(49),L=(a(168),a(191));var F=function(e,t){return k.a.post("http://localhost:3001/api/v1/news/",t,{headers:{Authorization:"Bearer "+e}}).then((function(e){return console.log(e.data)}))},R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={data:w.getDataFromApi("https://newsapi.org/v2/top-headlines?country=us&category=business&apiKey=3c5db478a60b42de94cea827cc28fe05").then((function(e){return a.promiseDone(e.data)})).catch(),promiseDone:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{className:"mb-5"},!this.state.promiseDone&&r.a.createElement(L.a,{variant:"indeterminate",color:"secondary"}),this.state.promiseDone&&r.a.createElement(B.a,null,this.state.data.map((function(t){return r.a.createElement(A.a,{key:e.state.data.indexOf(t),xs:12,md:6,lg:4},r.a.createElement(x,{type:"dashboard",buttonId:e.state.data.indexOf(t),article:t,readLater:e.readLater}))}))))}},{key:"promiseDone",value:function(e){this.setState({data:e.articles,promiseDone:!0}),console.log(this.state.data)}},{key:"readLater",value:function(e,t){F(localStorage.getItem("token"),e),document.getElementById(t).style.display="none",document.getElementById(t+"text").style.display="block"}}]),t}(n.Component),T=a(41),z=a(51),G=a.n(z),H=a(63),V=a(188);var W=function(e,t){return k.a.post("http://localhost:3001/auth/v1",{username:e,password:t}).then((function(t){return[t,e]})).catch((function(e){return"error"}))},J=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={inValidCredentials:!1,username:"",password:""},a.handleCredentials=a.handleCredentials.bind(Object(p.a)(a)),a.login=a.login.bind(Object(p.a)(a)),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(B.a,{className:"mt-5 justify-content-center"},r.a.createElement(A.a,{lg:4},r.a.createElement(D.a,{className:"text-center"},r.a.createElement(D.a.Header,null,r.a.createElement(D.a.Subtitle,null," ",r.a.createElement("h2",null,"Login"))),r.a.createElement(D.a.Body,null,this.state.inValidCredentials&&r.a.createElement("div",null,"Invalid"),r.a.createElement(V.a,null,r.a.createElement(V.a.Group,{controlId:"formBasicUsername"},r.a.createElement(V.a.Control,{className:"text-center",name:"username",type:"userename",placeholder:"Enter username",value:this.state.username,onChange:this.handleCredentials})),r.a.createElement(V.a.Group,{controlId:"formBasicPassword"},r.a.createElement(V.a.Control,{name:"password",className:"text-center",type:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleCredentials})),r.a.createElement(B.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,{variant:"dark",onClick:this.login},"Login")),r.a.createElement(A.a,null,r.a.createElement(g.b,{to:"./register"},"Register")))))))))}},{key:"login",value:function(){var e=Object(H.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(this.state.username,this.state.password);case 2:"error"!==(t=e.sent)?(localStorage.setItem("token",t[0].data.token),localStorage.setItem("username",t[1]),this.props.history.push("/dashboard")):this.setState({inValidCredentials:!0});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCredentials",value:function(e){console.log(e.target.value),this.setState(Object(T.a)({},e.target.name,e.target.value))}}]),t}(n.Component),P=a(79),U=a.n(P),K=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(S.a,null,r.a.createElement(B.a,{className:"mt-5 justify-content-center"},r.a.createElement(A.a,{lg:4},r.a.createElement(D.a,{className:"text-center"},r.a.createElement(D.a.Header,null,r.a.createElement(D.a.Title,null,r.a.createElement(U.a,{style:{fontSize:60}})),r.a.createElement(D.a.Subtitle,null," ",r.a.createElement("h2",null,"Register"))),r.a.createElement(D.a.Body,null,r.a.createElement(V.a,null,r.a.createElement(V.a.Group,{controlId:"formBasicUsername"},r.a.createElement(V.a.Control,{className:"text-center",name:"username",type:"userename",placeholder:"Enter username"})),r.a.createElement(V.a.Group,{controlId:"formBasicPassword"},r.a.createElement(V.a.Control,{name:"password",className:"text-center",type:"password",placeholder:"Enter password"})),r.a.createElement(B.a,null,r.a.createElement(A.a,null,r.a.createElement(v.a,{variant:"dark"},"Register")),r.a.createElement(A.a,null,r.a.createElement(g.b,{to:"./login"},"Login")))))))))}}]),t}(n.Component);var $=function(e){return k.a.post("http://localhost:3001/auth/v1/isAuthenticated ",{key:"value"},{headers:{Authorization:"Bearer "+e}})},q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={promiseDone:!1,isAuth:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return!1===this.state.promiseDone?(this.process(),null):!0===this.state.isAuth?r.a.createElement(f.b,this.props):r.a.createElement(f.a,{to:"/login"})}},{key:"process",value:function(){var e=Object(H.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.next=3,$(localStorage.getItem("token")).then((function(e){return e.data.isAuthenticated})).catch((function(e){return"error"}));case 3:t=e.sent,this.setState({promiseDone:!0,isAuth:t});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(n.Component),M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={data:w.getDataFromDatabase("http://localhost:3001/api/v1/news/",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){return a.promiseDone(e.data)})).catch(),promiseDone:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(S.a,{className:"mb-5"},!this.state.promiseDone&&r.a.createElement(L.a,{variant:"indeterminate",color:"secondary"}),this.state.promiseDone&&r.a.createElement(B.a,null,this.state.data.map((function(t){return r.a.createElement(A.a,{key:e.state.data.indexOf(t),xs:12,md:6,lg:4},r.a.createElement(x,{article:t}))}))))}},{key:"promiseDone",value:function(e){this.setState({data:e,promiseDone:!0}),console.log(this.state.data)}}]),t}(n.Component),Q=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(j,null),r.a.createElement(r.a.Fragment,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{path:"/",exact:!0,component:J}),r.a.createElement(f.b,{path:"/login",component:J}),r.a.createElement(f.b,{path:"/register",component:K}),r.a.createElement(q,{path:"/dashboard",component:R}),r.a.createElement(q,{path:"/savedNews",component:M}))),r.a.createElement(h,null)))}}]),t}(n.Component);c.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[116,1,2]]]);
//# sourceMappingURL=main.009d4b70.chunk.js.map